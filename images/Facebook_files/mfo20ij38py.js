/*!CK:2025393347!*//*1441003879,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9H2Hz"]); }

__d('FBRTCMissedVideoCallHandler',['Arbiter','AsyncDialog','AsyncRequest','ChannelConstants','FBRTCCore','FBRTCLogger','FBRTCSupport','XVideoCallMissedCallController','XVideoCallMissedCallDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=null,r=null,s=null;t.prototype.hideDialog=function(){'use strict';if(q){q.hide();q=null;r=null;if(s){s.unsubscribe();s=null;}}};function t(){'use strict';this.$FBRTCMissedVideoCallHandler1=null;}t.prototype.onCallMissed=function(u){'use strict';if(!n.isWebrtcSupported())return;if(r===null)this.$FBRTCMissedVideoCallHandler1=u;};t.prototype.showDialog=function(){'use strict';if(!this.$FBRTCMissedVideoCallHandler1||r)return;r=this.$FBRTCMissedVideoCallHandler1;this.$FBRTCMissedVideoCallHandler1=null;var u=o.getURIBuilder().setInt('user_id',r).getURI(),v=new j(u);i.send(v,this.$FBRTCMissedVideoCallHandler2.bind(this));};t.prototype.$FBRTCMissedVideoCallHandler2=function(u){'use strict';q=u;u.subscribe('confirm',this.$FBRTCMissedVideoCallHandler3.bind(this));u.subscribe('cancel',this.$FBRTCMissedVideoCallHandler4.bind(this));s=h.subscribe(k.getArbiterType('dismiss_all_missed_call_dialog'),this.$FBRTCMissedVideoCallHandler5.bind(this));};t.prototype.$FBRTCMissedVideoCallHandler3=function(){'use strict';l.startOutgoingCall(r,m.Trigger.RETURN_CALL,false);this.$FBRTCMissedVideoCallHandler4();};t.prototype.$FBRTCMissedVideoCallHandler4=function(){'use strict';this.hideDialog();this.$FBRTCMissedVideoCallHandler6();};t.prototype.$FBRTCMissedVideoCallHandler6=function(){'use strict';new j(p.getURIBuilder().getURI()).send();};t.prototype.$FBRTCMissedVideoCallHandler5=function(){'use strict';this.hideDialog();};f.exports=t;},null);