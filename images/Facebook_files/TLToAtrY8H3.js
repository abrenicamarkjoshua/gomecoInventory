/*!CK:2181493885!*//*1442198580,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["j3qHu"]); }

__d("MNCommerceLoggerEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",PROMOTIONAL_MESSAGE:"promotionalmessage",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate",BILL_PAYMENT_REQUEST:"billpaymentrequest"};},null,{});
__d("MNCommercePluginType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSENGER_BUSINESS_LINK:"messengerbusinesslink",MESSENGER_PRECONFRIMATION:"messengerpreconfirmation",MESSENGER_ACCOUNT_CONFIRMATION:"messengeraccountconfirmation",MESSENGER_TOGGLE:"messengertoggle"};},null,{});
__d('MNCommerceLogger',['BanzaiLogger','MNCommerceLoggerEvents','getViewportDimensions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();'use strict';var k=h.create({signal:true}),l={logPluginLoaded:function(m,n,o){var p=j();k.log('MessengerCommerceLoggerConfig',{brand_app_id:m,event:i.PLUGIN_CLIENT_RENDERED,debug_data:JSON.stringify({height:p.height,plugin:n,width:p.width}),recipient_id:o});}};f.exports=l;},null);
__d('PluginMessengerBusinessLink',['AsyncRequest','Event','MNCommerceLogger','MNCommercePluginType','URI'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m={setupPlugin:function(n,o,p,q){j.logPluginLoaded(o,k.MESSENGER_BUSINESS_LINK,p);var r={appID:o};i.listen(n,'click',(function(){new h().setURI('/plugins/messengerbusinesslink/allow_updates').setData(r).setHandler(this._onUpdatesAllowed.bind(this,o,q)).setMethod('POST').send();}).bind(this));},_onUpdatesAllowed:function(n,o){var p={app_id:n,from_business_link:true,messenger_app_id:n,state:o},q=new l('/plugins/messengeraccountconfirmation.php').setQueryData(p);q.go();}};f.exports=m;},null);
__d('PluginMessengerPreConfirmation',['AsyncRequest','DOM','csx','Event','MNCommerceLogger','MNCommercePluginType'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n={setupPlugin:function(o,p,q){l.logPluginLoaded(p,m.MESSENGER_PRECONFRIMATION,q);this._storeSeen(p);k.listen(o,'change',(function(r){this._sendShouldAllowCommerceUpdates(p,r.getTarget().checked,false);}).bind(this));},setupNotYouLink:function(o,p){k.listen(o,'click',(function(){this._sendShouldAllowCommerceUpdates(p,false,true);}).bind(this));},_storeSeen:function(o){var p={appID:o};new h().setURI('/plugins/messengerpreconfirmation/seen').setData(p).setMethod('POST').send();},_sendShouldAllowCommerceUpdates:function(o,p,q){var r={appID:o,allowUpdates:p,isNotYouLink:q};new h().setURI('/plugins/messengerpreconfirmation/checkbox').setData(r).setMethod('POST').setHandler(this._handleResponse).send();},_handleResponse:function(o){var p=o.payload&&o.payload.xhp;if(!p)return;var q=i.find(document.body,"._5a38");i.replace(q,p);}};f.exports=n;},null);